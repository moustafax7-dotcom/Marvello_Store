<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… | Marvello</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .admin-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        .admin-card {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .admin-card h3 {
            margin-bottom: 20px;
            color: var(--secondary);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
            font-size: 18px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--secondary);
            font-size: 14px;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: 'Cairo', sans-serif;
            font-size: 14px;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 153, 0, 0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .product-list {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        
        .product-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: 0.3s;
        }
        
        .product-item:hover {
            background: #f9f9f9;
        }
        
        .product-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }
        
        .product-img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 5px;
        }
        
        .product-details h4 {
            margin: 0;
            color: var(--secondary);
            font-size: 14px;
        }
        
        .product-details p {
            margin: 5px 0 0 0;
            color: #777;
            font-size: 12px;
        }
        
        .product-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-edit, .btn-delete {
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: 0.3s;
            font-family: 'Cairo', sans-serif;
        }
        
        .btn-edit {
            background: #3498db;
            color: white;
        }
        
        .btn-edit:hover {
            background: #2980b9;
        }
        
        .btn-delete {
            background: #e74c3c;
            color: white;
        }
        
        .btn-delete:hover {
            background: #c0392b;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, var(--primary), #ff7f00);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-card h4 {
            margin: 0;
            font-size: 12px;
            opacity: 0.9;
        }
        
        .stat-card .number {
            font-size: 32px;
            font-weight: bold;
            margin: 10px 0 0 0;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #eee;
        }
        
        .tab-btn {
            padding: 10px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: #777;
            border-bottom: 3px solid transparent;
            transition: 0.3s;
        }
        
        .tab-btn.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }

        .sidebar-link {
            display: block;
            padding: 12px 15px;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: 0.3s;
            font-size: 14px;
        }

        .sidebar-link:hover,
        .sidebar-link.active {
            background: var(--primary);
        }
    </style>
</head>
<body style="background:#f8f9fa;">
    <header>
        <div class="container">
            <nav class="navbar">
                <div class="logo" style="color: white; font-size: 20px; font-weight: bold;">
                    <i class="fas fa-cog"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
                </div>
                <div class="nav-links">
                    <a href="../index.html"><i class="fas fa-eye"></i> Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆÙ‚Ø¹</a>
                    <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Ø®Ø±ÙˆØ¬</a>
                </div>
            </nav>
        </div>
    </header>
    
    <div class="container" style="margin-top:30px; margin-bottom:30px;">
        <div class="admin-container" style="display: grid; grid-template-columns: 250px 1fr; gap: 20px;">
            <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->
            <div class="sidebar" style="background: var(--dark); color: white; padding: 20px; border-radius: 8px;">
                <div class="logo" style="text-align: center; margin-bottom: 30px;">
                    <img src="../images/logo.png" alt="Marvello Logo" style="width: 100px;">
                </div>
                <ul style="list-style: none; padding: 0;">
                    <li style="margin-bottom: 15px;">
                        <a href="#" onclick="switchTab('dashboard')" class="sidebar-link active"><i class="fas fa-tachometer-alt"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
                    </li>
                    <li style="margin-bottom: 15px;">
                        <a href="#" onclick="switchTab('products')" class="sidebar-link"><i class="fas fa-box"></i> Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</a>
                    </li>
                    <li style="margin-bottom: 15px;">
                        <a href="#" onclick="switchTab('orders')" class="sidebar-link"><i class="fas fa-shopping-bag"></i> Ø§Ù„Ø·Ù„Ø¨Ø§Øª</a>
                    </li>
                    <li style="margin-bottom: 15px;">
                        <a href="#" onclick="switchTab('reports')" class="sidebar-link"><i class="fas fa-chart-line"></i> Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a>
                    </li>
                </ul>
            </div>

            <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
            <div class="main-content">
            <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
            <div class="main-content">
                
                <!-- ØªØ¨ÙˆÙŠØ¨ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (Dashboard) -->
                <div id="dashboard" class="tab-content active">
                    <h3>ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h3>
                    <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h4>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h4>
                            <div class="number" id="totalProducts">0</div>
                        </div>
                        <div class="stat-card" style="background: linear-gradient(135deg, #27ae60, #229954);">
                            <h4>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©</h4>
                            <div class="number" id="totalOrders">0</div>
                        </div>
                        <div class="stat-card" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">
                            <h4>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ù†Ø®ÙØ¶Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h4>
                            <div class="number" id="lowStockProducts">0</div>
                        </div>
                        <div class="stat-card" style="background: linear-gradient(135deg, #f39c12, #d35400);">
                            <h4>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</h4>
                            <div class="number" id="totalProfit">0 Ø¬.Ù…</div>
                        </div>
                    </div>
                    
                    <div class="admin-card">
                        <h3>ğŸ“ˆ Ø±Ø³ÙˆÙ… Ø¨ÙŠØ§Ù†ÙŠØ© (Ù…Ø¨ÙŠØ¹Ø§Øª Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…)</h3>
                        <canvas id="salesChart" width="400" height="150"></canvas>
                    </div>
                </div>

                <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
                <div id="products" class="tab-content">
                    <div class="admin-card">
                        <h3>ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
                        
                        <form id="addProductForm">
                        <div class="form-group">
                            <label>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</label>
                            <input type="text" id="pName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ</label>
                                <input type="number" id="pPrice" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ" required>
                            </div>
                            <div class="form-group">
                                <label>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ… (Ù„Ù„Ø®ØµÙ…)</label>
                                <input type="number" id="pOldPrice" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ…">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø©</label>
                                <input type="number" id="pStock" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø©" required>
                            </div>
                            <div class="form-group">
                                <label>Ø§Ù„ØªØµÙ†ÙŠÙ</label>
                                <select id="pCategory">
                                    <option value="men">Ø±Ø¬Ø§Ù„ÙŠ</option>
                                    <option value="women">Ø­Ø±ÙŠÙ…ÙŠ</option>
                                    <option value="accessories">Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª</option>
                                    <option value="electronics">Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬</label>
                            <textarea id="pDesc" rows="4" placeholder="Ø£Ø¯Ø®Ù„ ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØµÙˆØ± (Ø§ÙØµÙ„ Ø¨ÙŠÙ†Ù‡Ø§ Ø¨ÙØ§ØµÙ„Ø©)</label>
                            <textarea id="pImages" rows="2" placeholder="https://example.com/img1.jpg, https://example.com/img2.jpg"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ ÙŠÙˆØªÙŠÙˆØ¨ (Embed URL)</label>
                            <input type="text" id="pVideo" placeholder="https://www.youtube.com/embed/...">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª (Ø§ÙØµÙ„ Ø¨ÙŠÙ†Ù‡Ø§ Ø¨ÙØ§ØµÙ„Ø©)</label>
                                <input type="text" id="pSizes" placeholder="S, M, L, XL">
                            </div>
                            <div class="form-group">
                                <label>Ø§Ù„Ø£Ù„ÙˆØ§Ù† (Ø§ÙØµÙ„ Ø¨ÙŠÙ†Ù‡Ø§ Ø¨ÙØ§ØµÙ„Ø©)</label>
                                <input type="text" id="pColors" placeholder="Ø£Ø³ÙˆØ¯, Ø£Ø¨ÙŠØ¶, Ø£Ø²Ø±Ù‚">
                            </div>
                        </div>
                        
                        <button type="submit" id="saveBtn" class="btn-primary" style="width:100%; padding:12px; font-weight:bold; font-size:16px;">
                            <i class="fas fa-save"></i> Ù†Ø´Ø± Ø§Ù„Ù…Ù†ØªØ¬
                        </button>
                        <button type="button" id="cancelBtn" onclick="resetForm()" style="display:none; width:100%; background:#e74c3c; color:white; border:none; padding:10px; margin-top:5px; cursor:pointer; border-radius:5px; font-family:'Cairo', sans-serif;">
                            <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
                        </button>
                    </form>
                </div>
                
                <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
                <div id="orders" class="tab-content">
                    <h3>ğŸ“‹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
                    <div id="ordersList" style="background: #f9f9f9; padding: 20px; border-radius: 5px; text-align: center; color: #777;">
                        Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†
                    </div>
                </div>
            </div>

            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
            <div class="product-list">
                <h3>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
                <div id="addedProductsList"></div>
            </div>
        </div>
    </div>

    <script src="../js/auth.js"></script>
    <script src="../js/admin.js"></script>
    
    <script>
        function switchTab(tabName) {
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù†Ø´Ø·Ø© Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø®ØªØ§Ø±
            document.getElementById(tabName).classList.add('active');
            
            // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø± Ø§Ù„Ù…Ø®ØªØ§Ø±
            event.target.classList.add('active');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø¥Ø°Ø§ ØªÙ… Ø§Ø®ØªÙŠØ§Ø± ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
            if(tabName === 'orders') {
                updateOrdersList();
            }
        }
        
        function updateOrdersList() {
            const orders = JSON.parse(localStorage.getItem('marvelloOrders')) || [];
            const ordersList = document.getElementById('ordersList');
            
            if(orders.length === 0) {
                ordersList.innerHTML = '<p style="color:#777; padding:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</p>';
                return;
            }
            
            ordersList.innerHTML = orders.map(order => `
                <div style="background:white; padding:15px; margin-bottom:10px; border-radius:5px; text-align:right;">
                    <h4 style="margin:0 0 10px 0; color:var(--secondary);">Ø·Ù„Ø¨ #${order.id}</h4>
                    <p style="margin:5px 0;"><strong>Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong> ${order.customer.name}</p>
                    <p style="margin:5px 0;"><strong>Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${order.customer.phone}</p>
                    <p style="margin:5px 0;"><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${order.date}</p>
                    <p style="margin:5px 0;"><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> <span style="background:var(--primary); color:white; padding:3px 10px; border-radius:3px;">${order.status}</span></p>
                    <p style="margin:5px 0;"><strong>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</strong> <span style="color:var(--red); font-weight:bold;">${order.totalAmount} Ø¬.Ù…</span></p>
                </div>
            `).join('');
        }
        
        function updateStats() {
            const products = JSON.parse(localStorage.getItem('marvelloProducts')) || [];
            const orders = JSON.parse(localStorage.getItem('marvelloOrders')) || [];
            const lowStock = products.filter(p => p.stock < 10).length;
            
            document.getElementById('totalProducts').innerText = products.length;
            document.getElementById('totalOrders').innerText = orders.length;
            document.getElementById('lowStockProducts').innerText = lowStock;
        }
        
        window.addEventListener('load', updateStats);
    </script>
</body>
</html>
